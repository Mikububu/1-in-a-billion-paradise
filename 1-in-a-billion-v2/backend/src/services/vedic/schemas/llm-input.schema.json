{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "title": "Vedic_Matchmaking_LLM_Input_Schema",
    "type": "object",
    "required": [
        "individual_a",
        "individual_b",
        "ashtakoota",
        "doshas",
        "chart_factors",
        "timing_factors",
        "system_configuration"
    ],
    "properties": {
        "individual_a": {
            "type": "object",
            "required": [
                "id",
                "name",
                "birth_data",
                "nakshatra_attributes"
            ],
            "properties": {
                "id": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                },
                "birth_data": {
                    "type": "object",
                    "required": [
                        "date",
                        "time",
                        "location"
                    ],
                    "properties": {
                        "date": {
                            "type": "string",
                            "format": "date"
                        },
                        "time": {
                            "type": "string"
                        },
                        "location": {
                            "type": "string"
                        }
                    }
                },
                "nakshatra_attributes": {
                    "type": "object",
                    "required": [
                        "nakshatra",
                        "pada",
                        "yoni",
                        "gana",
                        "nadi",
                        "varna",
                        "vashya"
                    ],
                    "properties": {
                        "nakshatra": {
                            "type": "string"
                        },
                        "pada": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 4
                        },
                        "yoni": {
                            "type": "string"
                        },
                        "gana": {
                            "type": "string",
                            "enum": [
                                "deva",
                                "manushya",
                                "rakshasa"
                            ]
                        },
                        "nadi": {
                            "type": "string",
                            "enum": [
                                "adi",
                                "madhya",
                                "antya"
                            ]
                        },
                        "varna": {
                            "type": "string"
                        },
                        "vashya": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "individual_b": {
            "$ref": "#/properties/individual_a"
        },
        "ashtakoota": {
            "type": "object",
            "required": [
                "varna",
                "vashya",
                "tara",
                "yoni",
                "graha_maitri",
                "gana",
                "bhakoot",
                "nadi",
                "total_score"
            ],
            "properties": {
                "varna": {
                    "type": "object",
                    "required": [
                        "score",
                        "max_score"
                    ],
                    "properties": {
                        "score": {
                            "type": "integer"
                        },
                        "max_score": {
                            "type": "integer",
                            "const": 1
                        }
                    }
                },
                "vashya": {
                    "type": "object",
                    "required": [
                        "score",
                        "max_score"
                    ],
                    "properties": {
                        "score": {
                            "type": "integer"
                        },
                        "max_score": {
                            "type": "integer",
                            "const": 2
                        }
                    }
                },
                "tara": {
                    "type": "object",
                    "required": [
                        "score",
                        "max_score"
                    ],
                    "properties": {
                        "score": {
                            "type": "integer"
                        },
                        "max_score": {
                            "type": "integer",
                            "const": 3
                        }
                    }
                },
                "yoni": {
                    "type": "object",
                    "required": [
                        "score",
                        "max_score",
                        "relationship_type"
                    ],
                    "properties": {
                        "score": {
                            "type": "integer"
                        },
                        "max_score": {
                            "type": "integer",
                            "const": 4
                        },
                        "relationship_type": {
                            "type": "string",
                            "enum": [
                                "friendly",
                                "neutral",
                                "enemy"
                            ]
                        }
                    }
                },
                "graha_maitri": {
                    "type": "object",
                    "required": [
                        "score",
                        "max_score"
                    ],
                    "properties": {
                        "score": {
                            "type": "integer"
                        },
                        "max_score": {
                            "type": "integer",
                            "const": 5
                        }
                    }
                },
                "gana": {
                    "type": "object",
                    "required": [
                        "score",
                        "max_score",
                        "pairing"
                    ],
                    "properties": {
                        "score": {
                            "type": "integer"
                        },
                        "max_score": {
                            "type": "integer",
                            "const": 6
                        },
                        "pairing": {
                            "type": "string"
                        }
                    }
                },
                "bhakoot": {
                    "type": "object",
                    "required": [
                        "score",
                        "max_score",
                        "dosha_present"
                    ],
                    "properties": {
                        "score": {
                            "type": "integer"
                        },
                        "max_score": {
                            "type": "integer",
                            "const": 7
                        },
                        "dosha_present": {
                            "type": "boolean"
                        }
                    }
                },
                "nadi": {
                    "type": "object",
                    "required": [
                        "score",
                        "max_score",
                        "dosha_present",
                        "dosha_cancelled"
                    ],
                    "properties": {
                        "score": {
                            "type": "integer"
                        },
                        "max_score": {
                            "type": "integer",
                            "const": 8
                        },
                        "dosha_present": {
                            "type": "boolean"
                        },
                        "dosha_cancelled": {
                            "type": "boolean"
                        }
                    }
                },
                "total_score": {
                    "type": "integer",
                    "minimum": 0,
                    "maximum": 36
                }
            }
        },
        "doshas": {
            "type": "object",
            "required": [
                "manglik",
                "nadi",
                "bhakoot",
                "other_doshas"
            ],
            "properties": {
                "manglik": {
                    "type": "object",
                    "required": [
                        "present",
                        "severity",
                        "symmetry"
                    ],
                    "properties": {
                        "present": {
                            "type": "boolean"
                        },
                        "severity": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 100
                        },
                        "symmetry": {
                            "type": "boolean"
                        }
                    }
                },
                "nadi": {
                    "type": "object",
                    "required": [
                        "present",
                        "cancelled"
                    ],
                    "properties": {
                        "present": {
                            "type": "boolean"
                        },
                        "cancelled": {
                            "type": "boolean"
                        }
                    }
                },
                "bhakoot": {
                    "type": "object",
                    "required": [
                        "present",
                        "cancelled"
                    ],
                    "properties": {
                        "present": {
                            "type": "boolean"
                        },
                        "cancelled": {
                            "type": "boolean"
                        }
                    }
                },
                "other_doshas": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "chart_factors": {
            "type": "object",
            "required": [
                "seventh_house_notes",
                "navamsha_notes"
            ],
            "properties": {
                "seventh_house_notes": {
                    "type": "string"
                },
                "navamsha_notes": {
                    "type": "string"
                }
            }
        },
        "timing_factors": {
            "type": "object",
            "required": [
                "current_dashas",
                "major_transits"
            ],
            "properties": {
                "current_dashas": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "major_transits": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        },
        "system_configuration": {
            "type": "object",
            "required": [
                "use_ashtakoota",
                "use_dashakoota",
                "use_manglik",
                "use_transits",
                "allow_remedies"
            ],
            "properties": {
                "use_ashtakoota": {
                    "type": "boolean",
                    "const": true
                },
                "use_dashakoota": {
                    "type": "boolean"
                },
                "use_manglik": {
                    "type": "boolean"
                },
                "use_transits": {
                    "type": "boolean"
                },
                "allow_remedies": {
                    "type": "boolean"
                }
            }
        }
    }
}